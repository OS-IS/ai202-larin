### Криптографічний захист клієнт-серверної взаємодії в СКБД PostgreSQL


1. Встановити OpenSSL-пакет. В терміналі командного рядку запустити утиліту openssl та переглянути перелік доступних команд.
![img.png](img/img.png)

2. Створити самопідписаний сертифікат для сервера СКБД PostgreSQL з наступними параметрами:  − атрибути C=UA, L=Odessa, O=OPU, OU=group, CN=surname.op.edu.ua, де group – назва вашої групи латиницею, surname – ваше прізвище латиницею − строк дії сертифікату = (variant * 10) днів, де variant – значення вашого варіанту.
   `openssl req -new -x509 -days 130 -nodes -text -out server.crt -keyout server.key -subj "/C=UA/L=Odesa/O=OPU/OU=AI-202/CN=larin.op.edu.ua"`
3. ![img_1.png](img/img_1.png)   

3. Переглянути вміст сертифікату та визначити алгоритми створення відкритого ключа, а також алгоритм встановлення цифрового підпису.
![img_2.png](img/img_2.png)
4. Скопіювати створений сертифікат відкритого ключа та закритий ключ до каталогу сервера СКБД PostgreSQL, яка використовувалася у попередній лабораторній роботі. Уконфігураційному файлі postgresql.conf налаштувати значення SSL-параметрів для підтримки SSL-з'єднання між сервером та клієнтами.
![img_3.png](img/img_3.png)

![img_4.png](img/img_4.png)

5. Використовуючи програму psql, встановити TSL/SSL-з'єднання з БД за прикладом з попередньої лабораторної роботи, але використовуючи формат параметрів "host=var1 port=var2 dbname=var3 user=var4 password=var5 sslmode=var6". Визначити версію TSL-протоколу та перелік використаних криптоалгоритмів.
![img_6.png](img/img_6.png)
![img_5.png](img/img_5.png)

6. Встановити ПЗ контейнерної віртуалізації Docker та запустити Docker через ваш Docker-обліковий запис.
![img_7.png](img/img_7.png)

7. Запустити Docker-контейнер СКБД PostgreSQL, використовуючи раніше розглянуті приклади (порт прослуховування запитів СКБД PostgreSQL = 5446).

`docker run --name larin-postgres -p 5446:5432 -e POSTGRES_PASSWORD=larin -d --rm postgres`
![img_8.png](img/img_8.png)

8. У Docker-контейнері встановити програмний пакунок аналізу мережевих пакетів tcpdump. Отримати перелік мережевих інтерфейсів на вашому комп’ютері.
![img_9.png](img/img_9.png)

9. Провести запуск програми аналізу мережевих пакетів для кожного мережевого інтерфейсу поки не буде знайдено активний інтерфейс, який взаємодіє з мережею Internet та виводить на екран інформацію про ці пакети.

![img_10.png](img/img_10.png)

10. Запустити програму аналізу мережевих пакетів в режимі прослуховування обраного мережевого інтерфейсу та налаштувати її на перегляд пакетів, які пов'язані з портом 5432, зберігаючи зміст пакетів в окремому файлі через перенаправлення потоку, наприклад, > res.dump. Результати роботи будуть використанні у наступних завданнях.
    `tcpdump -i 1 port 5432 -X > res1.dump`
![img_12.png](img/img_12.png)

![img_13.png](img/img_13.png)


11. Запустити окрему термінальну консоль та становити зв'язок із СКБД PostgreSQL, яка запущена через Docker-контейнер. Після успішного встановлення визначити версію TSL-протоколу та перелік використаних криптографічних алгоритмів.

![img_11.png](img/img_11.png)

12. Виконати команду створення користувача за прикладом з лабораторної роботи No6.

`CREATE USER larin WITH PASSWORD 'larin';
`

13. Проаналізувати вміст перехоплених пакетів, які було збережено у файлі, наприклад, res.dump. Підтвердити передачу деяких даних у відкритому вигляді.

![img_14.png](img/img_14.png)

14. Повторити пункт 11, встановивши зв’язок із СКБД, але вже через TLS/SSL-з’єднання.

![img_15.png](img/img_15.png)

![img_16.png](img/img_16.png)


15. Проаналізувати вміст перехоплених пакетів в програмі-аналізаторі. Підтвердити відсутність даних у відкритому вигляді.

![img_17.png](img/img_17.png)
